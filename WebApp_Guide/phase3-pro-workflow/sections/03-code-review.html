<h1>Code Review</h1>

<p>AI agent mÅ¯Å¾e slouÅ¾it jako prvnÃ­ ÃºroveÅˆ code review, identifikovat problÃ©my dÅ™Ã­ve, neÅ¾ kÃ³d uvidÃ­ kolegovÃ©.</p>

<h2>AI jako Code Reviewer</h2>

<p>Agent dokÃ¡Å¾e zkontrolovat:</p>

<ul>
    <li>ğŸ› PotenciÃ¡lnÃ­ bugy a edge cases</li>
    <li>ğŸ”’ BezpeÄnostnÃ­ problÃ©my</li>
    <li>âš¡ VÃ½konnostnÃ­ optimalizace</li>
    <li>ğŸ“ DodrÅ¾ovÃ¡nÃ­ konvencÃ­</li>
    <li>â™»ï¸ DuplicitnÃ­ kÃ³d</li>
</ul>

<h2>Prompt pro Code Review</h2>

<pre><code class="language-markdown"># Review Prompt
ProveÄ code review zmÄ›n v tomto PR.

ZamÄ›Å™ se na:
1. LogickÃ© chyby a edge cases
2. BezpeÄnostnÃ­ problÃ©my (injection, XSS, auth)
3. VÃ½konnost (N+1 queries, memory leaks)
4. ÄŒitelnost a maintainability
5. DodrÅ¾ovÃ¡nÃ­ naÅ¡ich konvencÃ­ (viz .antigravity-rules)

FormÃ¡t odpovÄ›di:
ğŸ”´ Critical - MusÃ­ se opravit
ğŸŸ¡ Warning - MÄ›lo by se opravit
ğŸŸ¢ Suggestion - Nice to have
ğŸ’¬ Question - PotÅ™ebuji vysvÄ›tlenÃ­</code></pre>

<h2>PÅ™Ã­klad Review vÃ½stupu</h2>

<pre><code class="language-markdown">## Code Review: user-auth.ts

ğŸ”´ **Critical: SQL Injection riziko** (Å™Ã¡dek 45)
```typescript
// ProblÃ©m
const query = `SELECT * FROM users WHERE id = ${userId}`;
// Å˜eÅ¡enÃ­
const query = `SELECT * FROM users WHERE id = $1`;
```

ğŸŸ¡ **Warning: ChybÃ­ error handling** (Å™Ã¡dek 72)
Funkce `fetchUserData` nehandluje pÅ™Ã­pad, kdy API vrÃ¡tÃ­ 500.

ğŸŸ¢ **Suggestion: Extract constant** (Å™Ã¡dek 23)
Magic number `86400` by mÄ›l bÃ½t konstanta `SECONDS_IN_DAY`.

ğŸ’¬ **Question:** Je zÃ¡mÄ›r, Å¾e `isAdmin` se kontroluje aÅ¾ po
naÄtenÃ­ dat? ZdÃ¡ se to jako race condition.</code></pre>

<h2>Self-Review Workflow</h2>

<p>PÅ™ed commitem poÅ¾Ã¡dejte agenta o review vaÅ¡ich zmÄ›n:</p>

<ol>
    <li>NapiÅ¡te kÃ³d</li>
    <li>SpusÅ¥te <code>Review moje zmÄ›ny od poslednÃ­ho commitu</code></li>
    <li>Opravte nalezenÃ© problÃ©my</li>
    <li>CommitnÄ›te</li>
</ol>

<h2>PR Description Generator</h2>

<pre><code class="language-markdown"># Prompt pro PR description
Analyzuj zmÄ›ny v aktuÃ¡lnÃ­ vÄ›tvi oproti main.
Vygeneruj PR description s:
- Souhrn zmÄ›n
- Seznam modifikovanÃ½ch souborÅ¯
- Breaking changes (pokud existujÃ­)
- TestovacÃ­ instrukce</code></pre>

<div class="callout callout-tip">
    <div class="callout-icon">ğŸ’¡</div>
    <div class="callout-content">
        <strong>Pro Tip:</strong> VytvoÅ™te si vlastnÃ­ review checklist v <code>.gemini/templates/review-checklist.md</code>. Agent ho pak automaticky pouÅ¾ije.
    </div>
</div>

<h2>Integrace s GitHub/GitLab</h2>

<p>Antigravity mÅ¯Å¾e automaticky:</p>

<ul>
    <li>PÅ™idÃ¡vat komentÃ¡Å™e k PR</li>
    <li>Navrhovat zmÄ›ny pÅ™Ã­mo v GitHub UI</li>
    <li>Aktualizovat PR description</li>
</ul>

<pre><code class="language-markdown"># NastavenÃ­ v .antigravity-rules
## GitHub Integration
- Automaticky reviewuj PR s labelem "needs-ai-review"
- PÅ™idej komentÃ¡Å™ s nalezenÃ½mi problÃ©my
- Pokud Å¾Ã¡dnÃ© critical issues, pÅ™idej approval</code></pre>
